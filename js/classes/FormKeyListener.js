var FormKeyListener = {    checkCapsLock : function(keycode, shift){//                    alert(keycode+", "+shift);        if ((keycode >= 97 && keycode <= 122 && shift)||            (keycode >= 65 && keycode <= 90 && !shift)){            document.getElementById("caps_lock_on")["style"]["visibility"] = "visible";            document.getElementById("caps_lock_on")["style"]["display"]="block";        }else if(keycode >= 97 && keycode <= 122||keycode >= 65 && keycode <= 90){            document.getElementById("caps_lock_on")["style"]["visibility"] = "hidden";            document.getElementById("caps_lock_on")["style"]["display"]="none";        }    },    keypressed : function(evt){        var keycode = (evt.which?evt.which:evt.keyCode);        var shift = false;        if (evt.shiftKey) {            shift = evt.shiftKey;        } else if (evt.modifiers) {            shift = !!(evt.modifiers & 4);        }        FormKeyListener.checkCapsLock(keycode, shift);    },    keyup : function(evt, properties){        var keycode = (evt.which?evt.which:evt.keyCode);        if(keycode==13){            document.forms[properties["formname"]].submit();            return;        }    },    addReturnListenerToField : function(formname, fieldname){        var field = document.forms[formname][fieldname];        Events.add( new Event(formname+":"+fieldname+":returnpressed", field, "onkeyup", FormKeyListener.keyup, true, {"formname":formname}));    },    addCapsLockListenerToField : function(formname, fieldname){        var field = document.forms[formname][fieldname];        Events.add( new Event(formname+":"+fieldname+":capslockcheck", field, "onkeypress", FormKeyListener.keypressed, true));    }};